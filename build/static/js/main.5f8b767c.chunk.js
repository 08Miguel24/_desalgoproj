(this["webpackJsonpdjango-react-project"]=this["webpackJsonpdjango-react-project"]||[]).push([[0],{27:function(e,t,a){e.exports=a(42)},32:function(e,t,a){},33:function(e,t,a){},34:function(e,t,a){},35:function(e,t,a){},36:function(e,t,a){},42:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),s=a(24),i=a.n(s),c=(a(32),a(6)),r=a(7),o=a(3),d=a(9),u=a(8),m=a(13),h=a(1),p=(a(33),a(34),a(35),a(36),function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={id:0},n.deleteTask=n.deleteTask.bind(Object(o.a)(n)),n.handleIdChange=n.handleIdChange.bind(Object(o.a)(n)),n}return Object(r.a)(a,[{key:"handleIdChange",value:function(e){this.setState({id:e.target.value})}},{key:"deleteTask",value:function(e){e.preventDefault(),this.props.handleDelete(this.state.id)}},{key:"render",value:function(){var e=this,t=this.props.data.map((function(t,a){var n=t.id,s=t.task_name,i=t.est_days,c=new Date(t.deadline),r=c.getFullYear(),o=c.getMonth()+1,d=c.getUTCDate(),u=c.getUTCHours(),m=c.getUTCMinutes(),h=c.getUTCSeconds(),p=t.difficulty;return l.a.createElement("li",{key:a,className:"list-group-item"},l.a.createElement("div",{className:"d-flex w-100 justify-content-between"},l.a.createElement("h5",{className:"mb-1"},s),l.a.createElement("small",null,l.a.createElement("button",{type:"button",className:"btn-close","aria-label":"Close","data-bs-toggle":"modal","data-bs-target":"#deleteTaskModal",onClick:e.handleIdChange,value:n}),l.a.createElement("div",{className:"modal fade",id:"deleteTaskModal",tabIndex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},l.a.createElement("div",{className:"modal-dialog modal-dialog-centered"},l.a.createElement("div",{className:"modal-content"},l.a.createElement("div",{className:"modal-header"},l.a.createElement("h5",{className:"modal-title",id:"exampleModalLabel"},"Are you sure you want to delete selected task?")),l.a.createElement("div",{className:"modal-footer"},l.a.createElement("button",{type:"button",className:"btn btn-outline-success",onClick:e.deleteTask,"data-bs-dismiss":"modal","aria-label":"Close"},"Yes"),l.a.createElement("button",{type:"button",className:"btn btn-outline-danger","data-bs-dismiss":"modal","aria-label":"Close"},"No"))))))),l.a.createElement("p",{className:"mb-1"},"estimated days to work on: ".concat(i)),l.a.createElement("p",{className:"mb-1"},"deadline: ".concat(o,"/").concat(d,"/").concat(r," ").concat(u,":").concat(m,":").concat(h)),l.a.createElement("p",{className:"mb-1"},"difficulty: ".concat(p)))}));return l.a.createElement("ul",{className:"list-group list-group-flush"},t)}}]),a}(n.Component));function b(){var e=[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31].map((function(e){return 1===e?l.a.createElement("option",{defaultValue:!0,key:e,value:e},e):l.a.createElement("option",{key:e,value:e},e)}));return l.a.createElement(l.a.Fragment,null,e)}function f(){var e=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"].map((function(e,t){return"Jan"===e?l.a.createElement("option",{defaultValue:!0,key:t,value:e},e):l.a.createElement("option",{key:t,value:e},e)}));return l.a.createElement(l.a.Fragment,null,e)}function g(e){var t=[1,2,3,4,5].map((function(t,a){return l.a.createElement("div",{key:a,className:"form-check form-check-inline"},l.a.createElement("input",{name:"difficulty",className:"form-check-input",type:"radio",id:"inlineRadio1",value:t,onChange:e.handleInputChange,checked:e.difficulty==t}),l.a.createElement("label",{className:"form-check-label",htmlFor:"inlineRadio1"},t))}));return l.a.createElement("div",{className:"input-group mb-3"},l.a.createElement("span",{className:"input-group-text",id:"inputGroup-sizing-default"},"Difficulty"),l.a.createElement("div",{className:"form-check"},t))}var v=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).changeInput=n.changeInput.bind(Object(o.a)(n)),n}return Object(r.a)(a,[{key:"changeInput",value:function(e){var t=e.target.getAttribute("name"),a=e.target.value;this.props.handleInputChange(t,a)}},{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement("button",{type:"button",className:"btn btn-primary","data-bs-toggle":"modal","data-bs-target":"#exampleModal"},"Enter Task"),l.a.createElement("div",{className:"modal fade",id:"exampleModal",tabIndex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},l.a.createElement("div",{className:"modal-dialog modal-dialog-centered"},l.a.createElement("div",{className:"modal-content"},l.a.createElement("div",{className:"modal-header"},l.a.createElement("h5",{className:"modal-title",id:"exampleModalLabel"},"Enter Task"),l.a.createElement("button",{type:"button",className:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})),l.a.createElement("div",{className:"modal-body"},l.a.createElement("div",{className:"input-group mb-3"},l.a.createElement("span",{className:"input-group-text",id:"inputGroup-sizing-default"},"Task name"),l.a.createElement("input",{name:"task-name",type:"text",className:"form-control","aria-label":"Sizing example input","aria-describedby":"inputGroup-sizing-default",onChange:this.changeInput,value:this.props["input-data"].task_name})),l.a.createElement("div",{className:"input-group mb-3"},l.a.createElement("span",{className:"input-group-text",id:"inputGroup-sizing-default"},"Est. days to work on task"),l.a.createElement("input",{name:"est-days",type:"text",className:"form-control","aria-label":"Sizing example input","aria-describedby":"inputGroup-sizing-default",onChange:this.changeInput,value:this.props["input-data"].est_days})),l.a.createElement("div",{className:"input-group mb-3"},l.a.createElement("span",{className:"input-group-text",id:"inputGroup-sizing-default"},"Deadline"),l.a.createElement("select",{name:"month",className:"form-select","aria-label":"Default select example",onChange:this.changeInput,value:this.props["input-data"].deadline.month},l.a.createElement(f,null)),l.a.createElement("select",{name:"day",className:"form-select","aria-label":"Default select example",onChange:this.changeInput,value:this.props["input-data"].deadline.day},l.a.createElement(b,null)),l.a.createElement("input",{name:"year",type:"text",className:"form-control","aria-label":"Sizing example input","aria-describedby":"inputGroup-sizing-default",onChange:this.changeInput,value:this.props["input-data"].deadline.year})),l.a.createElement("div",{className:"input-group mb-3"},l.a.createElement(g,{handleInputChange:this.changeInput,difficulty:this.props["input-data"].difficulty}))),l.a.createElement("div",{className:"modal-footer"},l.a.createElement("button",{type:"button",className:"btn btn-primary","data-bs-dismiss":"modal",onClick:this.props.handleSubmit},"Submit"))))))}}]),a}(n.Component),E=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={task_name:"",est_days:0,deadline:{month:"Jan",day:1,year:2021},difficulty:1,data:[],is_loading:!1},n.handleInputChange=n.handleInputChange.bind(Object(o.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(o.a)(n)),n.handleGenerate=n.handleGenerate.bind(Object(o.a)(n)),n.handleDelete=n.handleDelete.bind(Object(o.a)(n)),n.getCookie=n.getCookie.bind(Object(o.a)(n)),n}return Object(r.a)(a,[{key:"fetchData",value:function(){var e=this;fetch("http://127.0.0.1:8000/index/getposttaskraw").then((function(e){if(!e.ok)throw Error(e.statusText);return e.json()})).then((function(t){console.log(t),console.log("fetching complete will set state");var a=t.slice();e.setState({task_name:"",est_days:0,deadline:{month:"Jan",day:1,year:2021},difficulty:1,data:a})})).catch((function(e){return console.log(e)}))}},{key:"componentDidUpdate",value:function(){console.log(this.state.data),console.log("update successful")}},{key:"componentDidMount",value:function(){var e=this;this.setState({is_loading:!0}),fetch("http://127.0.0.1:8000/index/getposttaskraw").then((function(e){if(!e.ok)throw Error(e.statusText);return e.json()})).then((function(t){console.log("fetching complete will set state");var a=t.slice();e.setState({data:a,is_loading:!1})})).catch((function(e){return console.log(e)})),console.log("mounting successful")}},{key:"handleInputChange",value:function(e,t){"task-name"===e?this.setState({task_name:t}):"est-days"===e?this.setState({est_days:null===t.match(/^[0-9]+$/)?0:parseFloat(t)}):"month"===e?this.setState({deadline:{month:t,day:this.state.deadline.day,year:this.state.deadline.year}}):"day"===e?this.setState({deadline:{month:this.state.deadline.month,day:t,year:this.state.deadline.year}}):"year"===e?this.setState({deadline:{month:this.state.deadline.month,day:this.state.deadline.day,year:null===t.match(/^[0-9]+$/)?2021:parseInt(t)}}):this.setState({difficulty:t})}},{key:"getCookie",value:function(e){var t=null;if(document.cookie&&""!==document.cookie)for(var a=document.cookie.split(";"),n=0;n<a.length;n++){var l=a[n].trim();if(l.substring(0,e.length+1)===e+"="){t=decodeURIComponent(l.substring(e.length+1));break}}return t}},{key:"handleGenerate",value:function(e){e.preventDefault(),this.props.pressStateUpward(this.state.data)}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault();var a=this.getCookie("csrftoken"),n={task_name:this.state.task_name,est_days:this.state.est_days,deadline:{month:this.state.deadline.month,day:this.state.deadline.day,year:this.state.deadline.year},difficulty:this.state.difficulty};fetch("http://127.0.0.1:8000/index/getposttaskraw",{method:"POST",body:JSON.stringify(n),headers:{"content-type":"application/json; charset=UTF-8","X-CSRFToken":a}}).then((function(e){if(!e.ok)throw Error(e.statusText);return e.json()})).then((function(e){return console.log(e)})).then((function(){return t.fetchData()})).catch((function(e){return console.log(e)}))}},{key:"handleDelete",value:function(e){var t=this,a=this.getCookie("csrftoken");fetch("http://127.0.0.1:8000/index/deletetaskraw/".concat(e),{method:"DELETE",headers:{"content-type":"application/json; charset=UTF-8","X-CSRFToken":a}}).then((function(e){return console.log(e.json)})).then((function(){return t.fetchData()}))}},{key:"render",value:function(){return l.a.createElement("div",{className:"App"},l.a.createElement("div",{className:"card",style:{width:"36rem"}},l.a.createElement("div",null,l.a.createElement("div",{className:"col"},l.a.createElement("div",{className:"card-header"},"Priority Task Scheduler"),l.a.createElement("div",{className:"card-body"},l.a.createElement("h5",{className:"card-title"},"Username"),l.a.createElement("h6",{className:"card-subtitle mb-2 text-muted"},"Number of current tasks: ",this.state.data.length),l.a.createElement("p",{className:"card-text"},"Lorem, ipsum dolor sit amet consectetur adipisicing elit. Reprehenderit modi mollitia, dolores distinctio numquam eaque fugiat quas voluptatem? Similique, nostrum aut? Quidem quos ipsa labore! Earum sunt sit tempora impedit?"),l.a.createElement(v,{handleInputChange:this.handleInputChange,handleSubmit:this.handleSubmit,"input-data":this.state}))),l.a.createElement("div",{className:"col"},!0===this.state.is_loading?l.a.createElement("div",{className:"text-center"},l.a.createElement("div",{className:"spinner-border text-primary",role:"status"},l.a.createElement("span",{className:"visually-hidden"},"Loading..."))):l.a.createElement(p,{data:this.state.data,handleDelete:this.handleDelete})),l.a.createElement("div",{className:"col"},l.a.createElement("div",{className:"card-body"},l.a.createElement("button",{type:"button",className:"btn btn-outline-primary",disabled:0===this.state.data.length,onClick:this.handleGenerate},"Generate Schedule"))))))}}]),a}(l.a.Component),y=a(20),k=a(25),N=a(11),j=a(17),w=Object(j.a)("_est_days"),C=Object(j.a)("_deadline"),O=function(){function e(t,a,n,l,s){Object(c.a)(this,e),Object.defineProperty(this,w,{writable:!0,value:void 0}),Object.defineProperty(this,C,{writable:!0,value:void 0}),this.task_name=t,Object(N.a)(this,w)[w]=a,Object(N.a)(this,C)[C]=n,this.deadline_val=l,this.difficulty=s}return Object(r.a)(e,[{key:"value",value:function(){return Object(N.a)(this,w)[w]+this.deadline_val+this.difficulty}},{key:"weight",value:function(){return Object(N.a)(this,w)[w]}},{key:"ratio",value:function(){return this.value()/this.weight()}},{key:"deadline",value:function(){return Object(N.a)(this,C)[C]}},{key:"toString",value:function(){return"task name: ".concat(this.task_name,"\n\n            estimated days to work on task: ").concat(Object(N.a)(this,w)[w],"\n\n            deadline: ").concat(Object(N.a)(this,C)[C],"\n\n            deadline_val: ").concat(this.deadline_val,"\n\n            difficulty: ").concat(this.difficulty)}}]),e}(),S=function(e){if(0!==e.length){var t=new Date,a=t.getFullYear(),n=t.getMonth()+1,l=t.getUTCDate(),s=t.getHours(),i=t.getUTCMinutes(),c=new Date(Date.UTC(a,n-1,l,s,i+1,0)),r=e[e.length-1].deadline(),o=r-c,d=o/864e5,u="".concat(Math.trunc(o/1e3/3600),":").concat(Math.trunc(o/1e3%3600/60),":").concat(Math.trunc(o/1e3%3600%60));return console.log(c.toUTCString(),r.toUTCString(),o,d,u),function(e,t){var a=t,n=e.slice();console.log(n),n.sort((function(e,t){return e.ratio()>t.ratio()?-1:1})),console.log(n);var l,s=[],i=Object(k.a)(n.entries());try{for(i.s();!(l=i.n()).done;){var c=Object(y.a)(l.value,2),r=c[0],o=c[1];console.log(r,o);var d=o.weight(),u=o.value();if(!(a-d>=0)){var m=a/d;u*m,console.log(0);var h=d*m,p="".concat(Math.trunc(86400*h/3600),":").concat(Math.trunc(86400*h%3600/60),":").concat(Math.trunc(86400*h%3600%60));s.push([o,p]);break}a-=d,u,console.log(1);var b="".concat(Math.trunc(86400*d/3600),":").concat(Math.trunc(86400*d%3600/60),":").concat(Math.trunc(86400*d%3600%60));s.push([o,b])}}catch(f){i.e(f)}finally{i.f()}return console.log(s),s}(e,d)}return[]};function _(e){var t=function(e){if(0!==e.length){console.log(e);var t=[].concat(e);console.log(t);var a=t.sort((function(e,t){var a=new Date(e.deadline);return new Date(t.deadline)-a})).map((function(e,t){var a=new Date(e.deadline);return new O(e.task_name,e.est_days,a,t,e.difficulty)}));return console.log(a),a}return[]}(e.task_raws),a=S(t),n=0===a.length?l.a.createElement("h1",null,"No schedule available"):l.a.createElement("div",{className:"timeline"},a.map((function(e,t){var a=e[0].deadline().toUTCString().split(","),n=Object(y.a)(a,2),s=n[0],i=n[1].split(" "),c=i[1],r=i[2],o=i[3],d=i[4];return l.a.createElement("div",{key:t,className:"timeline-row"},l.a.createElement("div",{className:"timeline-time"},d,l.a.createElement("small",null,"".concat(c," ").concat(r," ").concat(o," ").concat(s))),l.a.createElement("div",{className:"timeline-dot fb-bg"}),l.a.createElement("div",{className:"timeline-content"},l.a.createElement("i",{className:"fa fa-map-marker"}),l.a.createElement("h4",null,e[0].task_name),l.a.createElement("p",null,"Lorem ipsum dolor sit amet consectetur adipisicing elit. Consectetur repudiandae temporibus at doloribus praesentium."),l.a.createElement("div",{className:""},l.a.createElement("p",{className:"badge badge-light"},"elapsed time to work on task: "),l.a.createElement("p",{className:"badge badge-light"},l.a.createElement("mark",null,e[1])))))})));return l.a.createElement(l.a.Fragment,null,n)}var x=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){return Object(c.a)(this,a),t.call(this,e)}return Object(r.a)(a,[{key:"render",value:function(){return l.a.createElement("div",{className:"App"},l.a.createElement(_,{task_raws:this.props.task_raws}))}}]),a}(n.Component),D=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={task_raws:[]},n.pressStateUpward=n.pressStateUpward.bind(Object(o.a)(n)),n}return Object(r.a)(a,[{key:"componentDidMount",value:function(){console.log("mounting successful")}},{key:"componentDidUpdate",value:function(){console.log(this.state.task_raws),console.log("update successful")}},{key:"pressStateUpward",value:function(e){this.setState({task_raws:e.slice()})}},{key:"render",value:function(){return l.a.createElement(m.a,null,l.a.createElement("nav",{className:"navbar fixed-top navbar-expand-lg navbar-dark bg-primary"},l.a.createElement("div",{className:"container-fluid"},l.a.createElement("a",{className:"navbar-brand",href:"Navbar"},"Navbar"),l.a.createElement("button",{className:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarNav","aria-controls":"navbarNav","aria-expanded":"false","aria-label":"Toggle navigation"},l.a.createElement("span",{className:"navbar-toggler-icon"})),l.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarNav"},l.a.createElement("ul",{className:"navbar-nav"},l.a.createElement("li",{className:"nav-item"},l.a.createElement(m.b,{to:"/",className:"nav-link"},"Home")),l.a.createElement("li",{className:"nav-item"},l.a.createElement(m.b,{to:"/about",className:"nav-link"},"About")),l.a.createElement("li",{className:"nav-item"},l.a.createElement(m.b,{to:"/login",className:"nav-link"},"Login")),l.a.createElement("li",{className:"nav-item"},l.a.createElement(m.b,{to:"/timeline",className:"nav-link"},"Timeline")))))),l.a.createElement(h.c,null,l.a.createElement(h.a,{path:"/timeline"},l.a.createElement(x,{task_raws:this.state.task_raws})),l.a.createElement(h.a,{path:"/login"},l.a.createElement(I,null)),l.a.createElement(h.a,{path:"/about"},l.a.createElement(T,null)),l.a.createElement(h.a,{path:"/"},l.a.createElement(E,{pressStateUpward:this.pressStateUpward}))))}}]),a}(l.a.Component);function T(){return l.a.createElement("div",{className:"App"},l.a.createElement("h1",null,"About"))}function I(e){return l.a.createElement("div",{className:"App"},l.a.createElement("h1",null,"Login"))}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(D,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[27,1,2]]]);
//# sourceMappingURL=main.5f8b767c.chunk.js.map